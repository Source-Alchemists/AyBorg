@page "/net/datasets/{projectId}"
@using SDK.Authorization
@attribute [Authorize(Roles = $"{Roles.Administrator}, {Roles.Engineer}")]

<PageTitle>@_projectName | Datasets/NET | AyBorg</PageTitle>

<div class="page-loading-bar">
    <MudProgressLinear Color="Color.Primary" Indeterminate="true" Class="my-0" hidden="@(!_isLoading)" />
</div>

<MudCard Class="rounded-lg">
    <MudCardHeader>
        <CardHeaderContent>
            <MudText Typo="Typo.h6">Draft Dataset</MudText>
        </CardHeaderContent>
        <CardHeaderActions>
            <MudButton Variant="Variant.Filled"
                        StartIcon="@Icons.Material.Filled.AddBox"
                        Color="Color.Default"
                        Disabled="@_isGenerateDisabled"
                        OnClick="@NewDraftClicked">New Draft</MudButton>
        </CardHeaderActions>
    </MudCardHeader>
    <MudCardContent>
        <MudTextField T="string"
                    Label="Name"
                    Text="@_tempDataset.Name"
                    TextChanged="@NameTextChanged"
                    Immediate
                    Required />
        <MudDivider />
        <div class="mud-full-width mt-5">
            <MudText Typo="Typo.caption">Distribution</MudText>
            <MudStack Class="d-flex justify-center" Row>
                <MudStack Class="d-flex justify-center mr-6">
                    <MudText Typo="Typo.h6" Color="Color.Primary" Align="Align.Center">Train</MudText>
                    <MudText Typo="Typo.h6" Color="Color.Primary" Align="Align.Center">@(Math.Round(_trainDistribution, 2))% (@_activeDataset.Distribution.ElementAt(0))</MudText>
                </MudStack>
                <MudStack Class="d-flex justify-center mr-6">
                    <MudText Typo="Typo.h6" Color="Color.Secondary" Align="Align.Center">Valid</MudText>
                    <MudText Typo="Typo.h6" Color="Color.Secondary" Align="Align.Center">@(Math.Round(_valDistribution, 2))% (@_activeDataset.Distribution.ElementAt(1))</MudText>
                </MudStack>
                <MudStack Class="d-flex justify-center">
                    <MudText Typo="Typo.h6" Color="Color.Tertiary" Align="Align.Center">Test</MudText>
                    <MudText Typo="Typo.h6" Color="Color.Tertiary" Align="Align.Center">@(Math.Round(_testDistribution, 2))% (@_activeDataset.Distribution.ElementAt(2))</MudText>
                </MudStack>
            </MudStack>
        </div>
        <MudDivider />
        <MudTextField T="string"
                    Label="Comment"
                    Variant="Variant.Filled"
                    Text="@_tempDataset.Comment"
                    Lines="5"
                    TextChanged="@CommentTextChanged"
                    Immediate/>
    </MudCardContent>
    <MudCardActions Class="flex-row-reverse">
        <MudStack Row>
            <MudButton Variant="Variant.Filled"
                        Color="Color.Primary"
                        StartIcon="@Icons.Material.Filled.SaveAlt"
                        Disabled="@_isSaveDisabled"
                        OnClick="@SaveChangesClicked">Save Changes</MudButton>
            <MudButton Variant="Variant.Filled"
                        Color="Color.Primary"
                        Disabled="@_isGenerateDisabled">Generate</MudButton>
        </MudStack>
    </MudCardActions>
</MudCard>

<MudCard Class="rounded-lg mt-5">
    <MudCardHeader>
        <CardHeaderContent>
            <MudText Typo="Typo.h6">Generated Datasets</MudText>
        </CardHeaderContent>
    </MudCardHeader>
    <MudCardContent>
    </MudCardContent>
</MudCard>
