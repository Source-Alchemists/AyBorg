<MudCard Class="mud-full-height">
    <MudCardHeader>
        <CardHeaderAvatar>
            <MudImage Src="icons/logo.svg" Width="40" Height="40" />
        </CardHeaderAvatar>
        <CardHeaderContent>
            <MudText>@Node.Step.Name</MudText>
        </CardHeaderContent>
        <CardHeaderActions>
            <MudIconButton Icon="@Icons.Material.Filled.Close" OnClick="OnCloseClicked" />
        </CardHeaderActions>
    </MudCardHeader>
    <MudCardContent Class="dialog-alternative" Style="height: calc(100% - 50px)">
        <MudGrid Class="mud-full-height">
            @* Inputs *@
            <MudItem xs="3" Class="mud-full-height">
                <MudCard Class="mud-full-height">
                    <MudCardHeader>
                        <CardHeaderAvatar>
                            <MudIcon Icon="@Icons.Material.Filled.Input" />
                        </CardHeaderAvatar>
                        <CardHeaderContent>
                            <MudText>Inputs</MudText>
                        </CardHeaderContent>
                    </MudCardHeader>
                    <MudCardContent Class="overflow-auto" Style="height: calc(100% - 65px)">
                        <MudList>
                            @foreach (var port in _ports.Where(p => p.Direction == SDK.Common.Ports.PortDirection.Input && p.Port.Brand != SDK.Common.Ports.PortBrand.Image))
                            {
                                <MudListItem>
                                    <PortResolver Node="@Node" Port="@port" Ports="@_ports" />
                                </MudListItem>
                            }
                        </MudList>
                    </MudCardContent>
                </MudCard>
            </MudItem>
            @* Visual content *@
            <MudItem xs="6" Class="mud-full-height">
                <MudCard Class="mud-full-height">
                    <MudCardHeader>
                        <CardHeaderAvatar>
                            <MudIcon Icon="@Icons.Material.Filled.Image" />
                        </CardHeaderAvatar>
                        <CardHeaderContent>
                            <MudText>Visual content</MudText>
                        </CardHeaderContent>
                    </MudCardHeader>
                    <MudCardContent Style="height: calc(100% - 65px)">
                        <MudTabs Centered="true" Class="mud-full-height">
                            @foreach (var imagePort in _ports.Where(p => p.Direction == SDK.Common.Ports.PortDirection.Input && p.Brand ==
                            SDK.Common.Ports.PortBrand.Image))
                            {
                                <MudTabPanel Icon="@Icons.Material.Filled.Input" Text="@imagePort.Name" Style="height: 100%">
                                    <PortResolver Node="@Node" Port="@imagePort" Ports="@_ports"  AlternativeMode/>
                                </MudTabPanel>
                            }
                            @foreach (var imagePort in _ports.Where(p => p.Direction == SDK.Common.Ports.PortDirection.Output && p.Brand ==
                            SDK.Common.Ports.PortBrand.Image))
                            {
                                <MudTabPanel Icon="@Icons.Material.Filled.Output" Text="@imagePort.Name" Style="height: 100%">
                                    <PortResolver Node="@Node" Port="@imagePort" Ports="@_ports"  AlternativeMode/>
                                </MudTabPanel>
                            }
                        </MudTabs>
                    </MudCardContent>
                </MudCard>
            </MudItem>
            @* Outputs *@
            <MudItem xs="3" Class="mud-full-height">
                <MudCard Class="mud-full-height">
                    <MudCardHeader>
                        <CardHeaderAvatar>
                            <MudIcon Icon="@Icons.Material.Filled.Output" />
                        </CardHeaderAvatar>
                        <CardHeaderContent>
                            <MudText>Outputs</MudText>
                        </CardHeaderContent>
                    </MudCardHeader>
                    <MudCardContent Class="overflow-auto" Style="height: calc(100% - 65px)">
                        <MudList>
                            @foreach (var port in _ports.Where(p => p.Direction == SDK.Common.Ports.PortDirection.Output && p.Port.Brand != SDK.Common.Ports.PortBrand.Image))
                            {
                                <MudListItem>
                                    <PortResolver Node="@Node" Port="@port" Ports="@_ports" />
                                </MudListItem>
                            }
                        </MudList>
                    </MudCardContent>
                </MudCard>
            </MudItem>
        </MudGrid>
    </MudCardContent>
</MudCard>
