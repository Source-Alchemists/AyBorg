@inherits LayoutComponentBase

<PageTitle>AyBorg</PageTitle>

<MudThemeProvider @bind-IsDarkMode="@_isDarkMode" Theme="_theme"/>
<MudDialogProvider/>
<MudSnackbarProvider/>

<MudScrollToTop>
    <MudFab Color="Color.Primary" StartIcon="@Icons.Material.Filled.KeyboardArrowUp" />
</MudScrollToTop>

<AuthorizeView>
    <Authorized>
        <MudLayout Class="mud-full-height">
            <MudAppBar Elevation="0" Class="blur noprint">
                <AppBarMenu />
                <MudSpacer />
                <MudToggleIconButton Toggled="@_isDarkMode"
                                        ToggledChanged="OnThemeChanged"
                                        Title="Switch to Dark Theme"
                                        Icon="@Icons.Material.Outlined.DarkMode"
                                        ToggledTitle="Switch to Light Theme"
                                        ToggledIcon="@Icons.Material.Filled.LightMode"
                                        Class="noprint mr-2" />
                <UserMenu />
            </MudAppBar>

            <MudDrawerContainer Class="mud-full-height">
                <MudDrawer @bind-Open="@_isDrawerVisible" Elevation="0" Variant="@DrawerVariant.Responsive" Class="noprint">
                    <MudNavMenu Color="Color.Secondary" Bordered>
                        <NavMenu />
                    </MudNavMenu>
                </MudDrawer>

                <MudMainContent Class="mud-full-height">
                    <MudContainer Class="mud-full-height py-0" MaxWidth="MaxWidth.ExtraExtraLarge">
                        @Body
                    </MudContainer>
                </MudMainContent>
            </MudDrawerContainer>
        </MudLayout>
    </Authorized>

    <NotAuthorized>
        <MudLayout Class="mud-full-height">
            <MudCard style="position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); width:400px">
                <MudCardHeader>
                    <MudText Typo="Typo.h6" Align="Align.Center" class="mud-full-width">Welcome to AyBorg!</MudText>
                </MudCardHeader>
                <MudCardContent>
                    <MudText Align="Align.Center" class="mud-full-width">
                        <MudLink Href="Identity/Account/Login">
                            Go to login
                        </MudLink>
                    </MudText>
                </MudCardContent>
            </MudCard>
        </MudLayout>
    </NotAuthorized>
</AuthorizeView>
